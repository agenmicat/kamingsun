---
layout: base.njk
---

<div class="watch">
  <div class="watch-main">
    <h1 class="watch-title">{{ title }}</h1>

    {% if youtube_id %}
      <div class="player">
        <iframe
          src="https://www.youtube.com/embed/{{ youtube_id }}"
          allowfullscreen
          loading="lazy"></iframe>
      </div>
    {% else %}
      <p><b>youtube_id belum diisi</b> di front matter post ini.</p>
    {% endif %}
{# === Next / Prev (berdasarkan urutan collections.posts) === #}
{% set posts = collections.posts %}
{% set idx = -1 %}

{% for p in posts %}
  {% if p.url == page.url %}
    {% set idx = loop.index0 %}
  {% endif %}
{% endfor %}

{% set nextPost = null %}
{% set prevPost = null %}

{# posts newest â†’ oldest (karena reverse di .eleventy.js)
   berikutnya (newer) = posts[idx - 1]
   sebelumnya (older) = posts[idx + 1]
#}
{% if idx > 0 %}
  {% set nextPost = posts[idx - 1] %}
{% endif %}

{% if idx >= 0 and idx < (posts | length) - 1 %}
  {% set prevPost = posts[idx + 1] %}
{% endif %}

<nav class="watch-nav">
  {% if prevPost %}
    <a class="nav-btn" href="{{ prevPost.url }}">
      <span class="nav-label">Sebelumnya</span>
      <span class="nav-title">{{ prevPost.data.title }}</span>
    </a>
  {% else %}
    <span class="nav-btn nav-disabled">
      <span class="nav-label">Sebelumnya</span>
      <span class="nav-title">Tidak ada</span>
    </span>
  {% endif %}

  {% if nextPost %}
    <a class="nav-btn nav-next" href="{{ nextPost.url }}">
      <span class="nav-label">Berikutnya</span>
      <span class="nav-title">{{ nextPost.data.title }}</span>
    </a>
  {% else %}
    <span class="nav-btn nav-disabled nav-next">
      <span class="nav-label">Berikutnya</span>
      <span class="nav-title">Tidak ada</span>
    </span>
  {% endif %}
</nav>
    {% if description %}
      <div class="watch-desc">
        {{ description | safe }}
      </div>
    {% endif %}

    <div class="watch-content">
      {{ content | safe }}
    </div>
  </div>

  <aside class="watch-side">
    <div class="side-title">Video lainnya</div>

    <ul class="side-list">
      {% for p in collections.posts %}
        {% if p.url != page.url %}
          <li class="side-item">
            <a class="side-thumb" href="{{ p.url }}">
              {% if p.data.youtube_id %}
                <img src="https://i.ytimg.com/vi/{{ p.data.youtube_id }}/mqdefault.jpg" alt="{{ p.data.title }}">
              {% endif %}
            </a>
            <div class="side-info">
              <a class="side-name" href="{{ p.url }}">{{ p.data.title }}</a>
            </div>
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  </aside>
</div>
